\section{Introduction}
\subsection{Starting position}
The company PlanFabrik GmbH creates floor plans for house technology. In a first
step the plans are analysed and enhanced through an employee. He adds more
information to the plan, like room polygons or he marks areas where house technology
can be installed and where not. Those areas are defined by different features. For example, usually the area close to windows has a higher density of pipes emitting heat to the room. This is to equal out the heat loss that usually occurs on windows.
\\
The process of drawing those areas is currently tool supported but still takes a lot of time, equal to the rising amount of rooms the employee has to analyse. The idea is to create a more automated system which does require only a small amount of user input.

\subsection{Problem description}
To manually create all the room-areas, it takes the user a lot of time. This is due to the fact that he has to click every corner of each room to make the room-enclosing polygon. The fact that the current tool is not too precise, which means that errors in selecting the exact corner exist regularly. The user then has to rearrange the created corner to fit the exact corner in the image. This process of selecting all the corners by hand is highly inefficient, especially for floor plans that have several hundred or even thousands of corners in it.
\\
An automated solution would provide a faster and more comfortable solution for the client. Additionally, the software may provide additional info that is needed. It can calculate the size of each room directly, which would otherwise have to be calculated by hand.

\subsection{Goals}
The idea of theory of this bachelor thesis is to compare different algorithms which can automatically analyse floor plans and draw the polygons for the rooms. The goal in the end is to show and explain a way to solve the problem and decide which algorithms are used best. All of this will help us create a software that can do the automated analysis for basic floor plans. More complicated floor plans may hold problems that our algorithms can not find, those are supposed to be solved manually with an editor.
\\
In the end, the program is supposed to create an output-file with the information of the areas found which is exportable to the existing software that currently handles the following processes.


\subsection{State of the art}
This section will explain what the current process for room recognition is in the Planfabrik GmbH. It will show the actual process that is to be replaced by the software described in this paper. In an additional section, there will be a description of papers similar to this one. The idea is to show what solution other works have done to solve the problem. It also describes the work that was the foundation for our work.

\subsubsection{Manual process}
 The process for room and zone detection is done by hand. To start, they have an unprocessed architectural floor plan in a ,dwg or .dxf format. It is processed by a CAD. When defining the room size, the person processing the plan has to select an edge selection tool to create the room polygon. As a room has at least four edges, this process will take at least 4 mouse clicks for every room. This selection tool has its difficulties as it is not always very exact and a corner selection has to be corrected from time to. From what we have experienced, every 4-8 corners there is going to be such an inaccuracy. The same process is done for any zone they define which will more than double the amount of user interactions necessary. This is due to the fact that every room can have several different zones.
 All those polygons will be saved in a separate layer in the floor plan. One layer will contain for example all rooms.
 \todo{write down the process more in depth and create an image of the process.} 

\subsection{Metriken}
To have some measurement to compare our product to what is already in place at the Planfabrik GmbH we went there and tested two values. Those values are the time which is needed to do the room segmentation and how many mouse-clicks it would take. We did that on five different floor plans that were preselected by us. They were selected because of how difficult they would be to analyze as well as their difference in the number of rooms to be found.

The plans chosen are the following:

AN\_1
50er
Grundriss\_OG
H\_OG
A1\_OG

The time was taken with a countdown clock on an iPhone and was stopped manually by hand. This led to the time being usually 1-2 seconds longer than the actual time. The way this was done for all tests will be the same so that this will not matter and the tests are comparable to each other. The clicks made were counted by hand.
An estimate for how many clicks are made on a floor plan is made along the following rules. For every room there is it usually takes the amount of edges the room has plus two additional clicks to create and confirm the room. There are also some additional clicks at the beginning to start the selection as well as the end to confirm and save it.
What was not taken into consideration in these tests are miss-clicks. These do happen quite often. There are two different types of errors that can come from those. Either the last selected edge was way off and has to be corrected which will take 3 additional clicks. The second error is that it deletes all the work done by now and all rooms have to be reselected. During our testing this second error happened twice during six test-runs. That the edge selection is not correct happens around every third or fourth room. All together it can generate an additional 10 percent of clicks over an several floor plans.


\begin{table}[]
	\centering
	\caption{My caption}
	\label{my-label}
	\begin{tabular}{@{}lll@{}}
		\toprule
		Plan          & Clicks & Time (S) \\ \midrule
		AN\_1         & 77     & 182 \\
		50er          & 85     & 170  \\
		Grundriss\_OG & 47     & 96 \\
		H\_OG         & 80     & 179 \\
		A1\_OG        & 222    & 452 \\ \bottomrule
	\end{tabular}
\end{table}

This table shows the test results for all the different floor plans. With this data we will make comparisons in the "Implementation" to test how effective our product is compared to the one in use.

Based on information from the Planfabrik GmbH each hour of work costs them 80 CHF. Therefore any time saved on those room selections saves them a considerable amount of money. This is why the time measurement takes an important part in our metrics. Additionally any time the algorithm is running and the worker can focus on other things will not count towards the time taken for room recognition. This may also be and advantage of this project, due to the fact that its an automated algorithm and there doesn't have to be a worker to select all the edges. 


\todo{Description of Testset}
